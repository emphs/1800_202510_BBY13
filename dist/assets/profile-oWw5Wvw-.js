import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css                *//* empty css               */import{aO as a,aL as h,aM as y,aN as p}from"./firebase-CCtn4aoY.js";function E(t){if(!t)return"N/A";const e=new Date(t);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(e)}function m(t,e){console.log("updating profile info:",e);const o=document.getElementById("profile-picture"),n=document.getElementById("profile-loading");if(o){n&&(n.style.display="block");const r=new Image;r.onload=function(){o.src=this.src,n&&(n.style.display="none")},r.onerror=function(){o.src="../../images/default-avatar.svg",n&&(n.style.display="none")},r.src=e.photoURL||"../../images/default-avatar.svg"}const l=document.getElementById("user-name");l&&(l.textContent=`${e.name}`.trim()||"Anonymous User");const c=document.getElementById("user-bio-short");c&&(c.textContent=e.title||"");const s=document.getElementById("user-bio");s&&(s.textContent=e.bio||"No bio available");const d=document.getElementById("join-date");d&&(d.textContent=E(e.createdAt)||"N/A");const g=document.getElementById("user-location");g&&(g.textContent=e.location||"Not specified");const i=document.getElementById("user-email");i&&(i.textContent=e.email||t.email,i.href=`mailto:${e.email||t.email}`);const u=document.getElementById("user-phone");u&&(u.textContent=e.phone||"Not specified")}async function f(t){try{const e=h(y,"users",t),o=await p(e);return o.exists()?o.data():(console.log("No such document!"),null)}catch(e){return console.error("Error getting user data:",e),null}}async function I(){try{await a.signOut(),console.log("Signed out successfully"),localStorage.removeItem("loggedInUserId"),window.location.href="dashboard.html"}catch(t){console.error("Error signing out:",t),alert("Error signing out. Please try again.")}}async function b(){try{console.log("Initializing page...");const t=document.getElementById("signOutBtn");if(t)console.log("Found sign out button, adding click handler"),t.addEventListener("click",I);else throw console.error("Couldn't find sign out button"),new Error("Sign out button not found");const e=a.currentUser;if(e){console.log("User is logged in:",e.email);const o=await f(e.uid);o&&m(e,o)}else console.log("No user logged in, waiting for auth state change")}catch(t){console.error("Error initializing page:",t)}}a.onAuthStateChanged(async t=>{if(console.log("Auth state changed:",t?"logged in":"logged out"),t)try{const e=await f(t.uid);e&&m(t,e)}catch(e){console.error("Error loading user data:",e),alert("Failed to load profile data. Please refresh the page.")}else console.log("No user logged in, redirecting to login page"),window.location.href="dashboard.html"});document.addEventListener("DOMContentLoaded",b);
